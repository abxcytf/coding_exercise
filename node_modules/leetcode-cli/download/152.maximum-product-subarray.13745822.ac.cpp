/*
 * [152] Maximum Product Subarray
 *
 * https://leetcode.com/problems/maximum-product-subarray
 *
 * Medium (24.80%)
 * Total Accepted:    89918
 * Total Submissions: 362599
 * Testcase Example:  '[-2]'
 *
 * 
 * Find the contiguous subarray within an array (containing at least one
 * number) which has the largest product.
 * 
 * 
 * 
 * For example, given the array [2,3,-2,4],
 * the contiguous subarray [2,3] has the largest product = 6.
 * 
 */
class Solution {
public:
    int maxProduct(int A[], int n) {
        int b = A[0], s = A[0];
        int bb = b, ss = s;
        for (int i = 1; i < n; ++i) {
            int new_b = max(A[i],max(A[i]*b,A[i]*s));
            int new_s = min(A[i],min(A[i]*b,A[i]*s));
            b = new_b;
            s = new_s;
            if (b > bb) bb = b;
            if (s < ss) ss = s;
            //cout << b << "," << s << endl;
        }
        return bb;
    }
};
