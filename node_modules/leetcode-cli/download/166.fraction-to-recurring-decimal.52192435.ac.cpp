/*
 * [166] Fraction to Recurring Decimal
 *
 * https://leetcode.com/problems/fraction-to-recurring-decimal
 *
 * Medium (16.99%)
 * Total Accepted:    46726
 * Total Submissions: 275143
 * Testcase Example:  '1\n5'
 *
 * Given two integers representing the numerator and denominator of a fraction,
 * return the fraction in string format.
 * 
 * If the fractional part is repeating, enclose the repeating part in
 * parentheses.
 * 
 * For example,
 * 
 * Given numerator = 1, denominator = 2, return "0.5".
 * Given numerator = 2, denominator = 1, return "2".
 * Given numerator = 2, denominator = 3, return "0.(6)".
 * 
 * 
 * 
 * 
 * No scary math, just apply elementary math knowledge. Still remember how to
 * perform a long division?
 * Try a long division on 4/9, the repeating part is obvious. Now try 4/333. Do
 * you see a pattern?
 * Be wary of edge cases! List out as many test cases as you can think of and
 * test your code thoroughly.
 * 
 * 
 * Credits:Special thanks to @Shangrila for adding this problem and creating
 * all test cases.
 */
class Solution {
public:
    string fractionToDecimal(long m, long n) {
        string s;
        unordered_map<long,int> c;
        if ((m>0&&n<0) ||(m<0&&n>0)) s.append("-");
        m=abs(m);n=abs(n);
        
        bool first = true;
        while (true) {
            long x = m/n, y = m%n;
            s+=to_string(x);
            if (y==0) break;
            if (first) {
                s.append(".");
                first = false;
            }
            if (c.find(y) != c.end()) {
                s.insert(c[y]+1, "(");
                s.append(")");
                break;
            }
            c[y] = s.size()-1;
            m = y*10;
        }
        return s;
    }
};
