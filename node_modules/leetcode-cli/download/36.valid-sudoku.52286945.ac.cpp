/*
 * [36] Valid Sudoku
 *
 * https://leetcode.com/problems/valid-sudoku
 *
 * Medium (34.38%)
 * Total Accepted:    109342
 * Total Submissions: 318021
 * Testcase Example:  '[".87654321","2........","3........","4........","5........","6........","7........","8........","9........"]'
 *
 * Determine if a Sudoku is valid, according to: Sudoku Puzzles - The Rules.
 * 
 * The Sudoku board could be partially filled, where empty cells are filled
 * with the character '.'.
 * 
 * 
 * 
 * A partially filled sudoku which is valid.
 * 
 * 
 * Note:
 * A valid Sudoku board (partially filled) is not necessarily solvable. Only
 * the filled cells need to be validated.
 * 
 */
class Solution {
public:
    bool isValidSudoku(vector<vector<char>>& board) {
        if (board.size() != 9) return false;
        if (board[0].size() != 9) return false;
        
        int row[9] = {0},col[9] = {0},sq[9] = {0};
        int c;
        for (int i=0; i<9; ++i) {
            for (int j=0; j<9; ++j) {
                if (board[i][j]=='.') continue;
                
                c = 1 << board[i][j];
                if (row[i] & c) return false;
                row[i] |= c;
                
                if (col[j] & c) return false;
                col[j] |= c;
                
                int x = (i/3)*3+(j/3);
                if (sq[x] & c) return false;
                sq[x] |= c;
            }
        }
        return true;
    }
};
