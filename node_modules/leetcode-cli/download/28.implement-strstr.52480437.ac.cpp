/*
 * [28] Implement strStr()
 *
 * https://leetcode.com/problems/implement-strstr
 *
 * Easy (27.26%)
 * Total Accepted:    162764
 * Total Submissions: 596971
 * Testcase Example:  '""\n""'
 *
 * 
 * Implement strStr().
 * 
 * 
 * Returns the index of the first occurrence of needle in haystack, or -1 if
 * needle is not part of haystack.
 * 
 */
class Solution {
public:
    int strStr(string s1, string s2) {
        int n1=s1.size(),n2=s2.size();
        if (n2==0) return 0;
        if (n1==0) return -1;
        
        vector<int> next(n2);
        next[0]=0;
        if (n2>1) next[1]=0;
        for (int i=2; i<n2; ++i) {
            if (s2[i-1]==s2[next[i-1]]) next[i]=next[i-1]+1;
            else next[i]=0;
        }
        
        int i1=0,i2=0;
        while (i1<n1 && i2<n2) {
            if (s1[i1]==s2[i2]) {
                ++i1; ++i2;
                if (i2==n2) return i1-n2;
            } else {
                if (i2==0) ++i1;
                else i2=next[i2];
            }
        }
        return -1;
    }
};
